View(cmh_mh)
View(data)
'poop' + 'y'
data <- smh_mh %>%
filter(Type=='Form 1 Total') %>%
pivot_longer(cols = `March 1 - March 7`:`August 30th - September 5th`,
names_to='week',
values_to='count') %>%
mutate(date=paste(week, Year, sep=' ')) %>%
mutate(Year=as.factor(Year))
poisson_out <- glm(count ~ Year, data=data, family='poisson')
summary(poisson_out)
View(data)
data <- smh_mh %>%
# filter(Type=='Form 1 Total') %>%
pivot_longer(cols = `March 1 - March 7`:`August 30th - September 5th`,
names_to='week',
values_to='count') %>%
mutate(date=paste(week, Year, sep=' ')) %>%
mutate(Year=as.factor(Year))
poisson_out <- glm(count ~ Year, data=data, family='poisson')
summary(poisson_out)
View(data)
# volume data
cmh_ed <- read_excel('data/ED Volume Cambridge.xlsx')
grh_ed <- read_excel('data/ED volumes GRH.xlsx')
smh_ed <- read_excel('data/ED volumes SMH.xlsx')
# mental health data
cmh_mh <- read_excel('data/COVID-19 data sheet edited Jan 23.xlsx', sheet='cmh') %>%
pivot_longer(cols = `March 1 - March 7`:`August 30th - September 5th`,
names_to='week',
values_to='count') %>%
mutate(date=paste(week, Year, sep=' '))
grh_mh <- read_excel('data/COVID-19 data sheet edited Jan 23.xlsx', sheet='grh') %>%
pivot_longer(cols = `March 1 - March 7`:`August 30th - September 5th`,
names_to='week',
values_to='count') %>%
mutate(date=paste(week, Year, sep=' '))
smh_mh <- read_excel('data/COVID-19 data sheet edited Jan 23.xlsx', sheet='smh') %>%
pivot_longer(cols = `March 1 - March 7`:`August 30th - September 5th`,
names_to='week',
values_to='count') %>%
mutate(date=paste(week, Year, sep=' '))
police <- read_excel('data/COVID-19 data sheet edited Jan 23.xlsx', sheet='pol')
View(grh_mh)
get_data <- function(data, type, subtype=NA) {
cmh <- data$cmh %>%
filter(Type==type & subtype==subtype)
smh <- data$smh %>%
filter(Type==type & subtype==subtype)
grh <- data$grh %>%
filter(Type==type & subtype==subtype)
cmh %>% left_join(smh, by=date) %>%
left_join(grh, by=date)
}
data <- list(cmh_mh, grh_mh, smh_mh)
get_data(data, 'Form 1 Total')
get_data <- function(data, type, subtype=NA) {
cmh <- data$cmh %>%
filter(Type==type)
smh <- data$smh %>%
filter(Type==type)
grh <- data$grh %>%
filter(Type==type)
cmh %>% left_join(smh, by=date) %>%
left_join(grh, by=date)
}
data <- list(cmh_mh, grh_mh, smh_mh)
get_data(data, 'Form 1 Total')
get_data <- function(data, type, subtype=NA) {
cmh <- data$cmh_mh %>%
filter(Type==type & subtype==subtype)
smh <- data$smh_mh %>%
filter(Type==type & subtype==subtype)
grh <- data$grh_mh %>%
filter(Type==type & subtype==subtype)
cmh %>% left_join(smh, by=date) %>%
left_join(grh, by=date)
}
data <- list(cmh_mh, grh_mh, smh_mh)
get_data(data, 'Form 1 Total')
get_data <- function(data, type, subtype=NA) {
cmh <- data$cmh_mh %>%
filter(Type==type)
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh %>% left_join(smh, by=date) %>%
left_join(grh, by=date)
}
data <- list(cmh_mh, grh_mh, smh_mh)
get_data(data, 'Form 1 Total')
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
poisson_out <- glm(count ~ Year, data=data, family='poisson')
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
data <- smh %>%
left_join(grh, by=date)
View(cmh_mh)
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
data <- smh %>%
left_join(grh, by='date')
poisson_out <- glm(count ~ Year, data=data, family='poisson')
View(data)
?left_join
data <- list(cmh_mh, grh_mh, smh_mh)
get_data(data, 'Form 1 Total')
get_data <- function(data, type, subtype=NA) {
cmh <- data$cmh_mh %>%
filter(Type==type)
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh %>% left_join(smh, by='date') %>%
left_join(grh, by='date')
}
get_data(data, 'Form 1 Total')
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date')
poisson_out <- glm(count ~ Year, data=data, family='poisson')
summary(poisson_out)
View(data)
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y)
# poisson_out <- glm(count ~ Year, data=data, family='poisson')
# summary(poisson_out)
View(data)
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(year, week, total)
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total)
# poisson_out <- glm(count ~ Year, data=data, family='poisson')
# summary(poisson_out)
View(data)
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total)
poisson_out <- glm(total ~ Year, data=data, family='poisson')
summary(poisson_out)
View(data)
# Compute the analysis of variance
res.aov <- aov(total ~ Year, data = data)
summary(res.aov)
View(data)
smh <- smh_mh %>%
filter(Type=='Form 1 Total')
grh <- grh_mh %>%
filter(Type=='Form 1 Total')
cmh <- cmh_mh %>%
filter(Type=='Form 1 Total')
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
poisson_out <- glm(total ~ Year, data=data, family='poisson')
summary(poisson_out)
# Compute the analysis of variance
res.aov <- aov(total ~ Year, data = data)
summary(res.aov)
ggplot(data, aes(x=total, fill=Year)) +
geom_histogram()
get_data <- function(data, type, subtype=NA) {
return(data$smh_mh)
}
get_data(list(smh_mh, grh_mh, cmh_sh), 'hello')
get_data(list(smh_mh, grh_mh, cmh_mh), 'hello')
list(smh_mh, grh_mh, cmh_mh)
x <- list(smh_mh, grh_mh, cmh_mh)
View(x)
get_data(list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh), 'hello')
get_data <- function(data, type, subtype=NA) {
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh <- data$cmh_mh %>%
filter(Type==type)
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
return(data)
}
get_data(list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh), 'Form 1 Total')
get_data(list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh), 'Form 1 Total')==data
get_data(list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh), 'Form 1 Total')
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
summary(poisson_out)
# Compute the analysis of variance
res.aov <- aov(total ~ Year, data = data)
summary(res.aov)
View(grh_mh)
get_data <- function(data, type, subtype=NA) {
if (!is.null(breaks)) {
smh <- data$smh_mh %>%
filter(Type==type, Subtype==subtype)
grh <- data$grh_mh %>%
filter(Type==type, Subtype==subtype)
cmh <- data$cmh_mh %>%
filter(Type==type, Subtype==subtype)
} else {
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh <- data$cmh_mh %>%
filter(Type==type)
}
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
return(data)
}
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
get_data <- function(data, type, subtype=NA) {
if (!is.null(subtype)) {
smh <- data$smh_mh %>%
filter(Type==type, Subtype==subtype)
grh <- data$grh_mh %>%
filter(Type==type, Subtype==subtype)
cmh <- data$cmh_mh %>%
filter(Type==type, Subtype==subtype)
} else {
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh <- data$cmh_mh %>%
filter(Type==type)
}
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
return(data)
}
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
get_data <- function(data, type, subtype=NA) {
if (is.null(subtype)) {
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh <- data$cmh_mh %>%
filter(Type==type)
} else {
smh <- data$smh_mh %>%
filter(Type==type, Subtype==subtype)
grh <- data$grh_mh %>%
filter(Type==type, Subtype==subtype)
cmh <- data$cmh_mh %>%
filter(Type==type, Subtype==subtype)
}
data <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
return(data)
}
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total', subtype=NA)
poisson_out <- glm(total ~ Year, data=data, family='poisson')
get_data <- function(data, type, subtype=NA) {
if (is.null(subtype)) {
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh <- data$cmh_mh %>%
filter(Type==type)
} else {
smh <- data$smh_mh %>%
filter(Type==type, Subtype==subtype)
grh <- data$grh_mh %>%
filter(Type==type, Subtype==subtype)
cmh <- data$cmh_mh %>%
filter(Type==type, Subtype==subtype)
}
whole <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
return(whole)
}
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total', subtype = 'hi')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
get_data <- function(data, type, subtype=NA) {
# if (is.null(subtype)) {
#   smh <- data$smh_mh %>%
#     filter(Type==type)
#   grh <- data$grh_mh %>%
#     filter(Type==type)
#   cmh <- data$cmh_mh %>%
#     filter(Type==type)
# } else {
#   smh <- data$smh_mh %>%
#     filter(Type==type, Subtype==subtype)
#   grh <- data$grh_mh %>%
#     filter(Type==type, Subtype==subtype)
#   cmh <- data$cmh_mh %>%
#     filter(Type==type, Subtype==subtype)
# }
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh <- data$cmh_mh %>%
filter(Type==type)
whole <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
return(whole)
}
summary(poisson_out)
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
summary(poisson_out)
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
summary(poisson_out)
print('hi')
get_data <- function(data, type, subtype=NA) {
if (is.null(subtype)) {
print('hi')
# smh <- data$smh_mh %>%
#   filter(Type==type)
# grh <- data$grh_mh %>%
#   filter(Type==type)
# cmh <- data$cmh_mh %>%
#   filter(Type==type)
}
# else {
#   smh <- data$smh_mh %>%
#     filter(Type==type, Subtype==subtype)
#   grh <- data$grh_mh %>%
#     filter(Type==type, Subtype==subtype)
#   cmh <- data$cmh_mh %>%
#     filter(Type==type, Subtype==subtype)
# }
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh <- data$cmh_mh %>%
filter(Type==type)
whole <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
return(whole)
}
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
summary(poisson_out)
get_data <- function(data, type, subtype=NULL) {
if (is.null(subtype)) {
smh <- data$smh_mh %>%
filter(Type==type)
grh <- data$grh_mh %>%
filter(Type==type)
cmh <- data$cmh_mh %>%
filter(Type==type)
} else {
smh <- data$smh_mh %>%
filter(Type==type, Subtype==subtype)
grh <- data$grh_mh %>%
filter(Type==type, Subtype==subtype)
cmh <- data$cmh_mh %>%
filter(Type==type, Subtype==subtype)
}
whole <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
return(whole)
}
mh <- list(smh_mh=smh_mh, grh_mh=grh_mh, cmh_mh=cmh_mh)
data <- get_data(mh, 'Form 1 Total')
poisson_out <- glm(total ~ Year, data=data, family='poisson')
summary(poisson_out)
# Compute the analysis of variance
res.aov <- aov(total ~ Year, data = data)
summary(res.aov)
View(grh_mh)
get_data(mh, 'Substance Related')
get_data(mh, 'Substance related')
# get_data(mh, 'Substance related')
grh_mh %>%
filter(Type=='Substance related')
# get_data(mh, 'Substance related')
smh <- data$smh_mh %>%
filter(Type=='Substance related')
# get_data(mh, 'Substance related')
smh <- smh_mh %>%
filter(Type=='Substance related')
grh <- grh_mh %>%
filter(Type=='Substance related')
cmh <- cmh_mh %>%
filter(Type=='Substance related')
whole <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date') %>%
mutate(total=count+count.x+count.y) %>%
select(Year, week, total) %>%
mutate(Year=as.factor(Year))
View(whole)
# get_data(mh, 'Substance related')
smh <- smh_mh %>%
filter(Type=='Substance related')
grh <- grh_mh %>%
filter(Type=='Substance related')
cmh <- cmh_mh %>%
filter(Type=='Substance related')
whole <- smh %>%
left_join(grh, by='date') %>%
left_join(cmh, by='date')
View(whole)
View(grh_mh)
View(cmh_mh)
View(smh_mh)
